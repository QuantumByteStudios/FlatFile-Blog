# Enable URL rewriting
RewriteEngine On

# Security - Block access to sensitive files
<Files "config.php">
    Require all denied
</Files>

<Files "*.json">
    Require all denied
</Files>

# Block access to logs and content directories
RewriteRule ^logs/ - [F,L]
RewriteRule ^content/ - [F,L]

# Admin panel (no .php needed)
RewriteRule ^admin/?$ admin/index.php [L,QSA]
RewriteRule ^admin/login/?$ admin/login.php [L,QSA]
RewriteRule ^admin/logout/?$ admin/logout.php [L,QSA]
RewriteRule ^admin/new-post/?$ admin/new-post.php [L,QSA]
RewriteRule ^admin/edit-post/?$ admin/edit-post.php [L,QSA]
RewriteRule ^admin/settings/?$ admin/settings.php [L,QSA]

# Check if the request is not a directory
RewriteCond %{REQUEST_FILENAME} !-d

# Check if the .php version of the file exists
RewriteCond %{REQUEST_FILENAME}.php -f

# Rewrite to the .php file
RewriteRule ^(.*)$ $1.php [L]

# Blog posts by slug (no .php needed)
RewriteRule ^([a-zA-Z0-9\-]+)/?$ post.php?slug=$1 [L,QSA]

# Default to index
RewriteRule ^$ index.php [L,QSA]

# Custom error page for 404 errors
ErrorDocument 404 /404.php
